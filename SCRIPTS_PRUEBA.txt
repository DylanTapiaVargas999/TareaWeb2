â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SCRIPT DE PRUEBA - VERIFICAR FIRESTORE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Copia y pega estos scripts en la CONSOLA DEL NAVEGADOR (F12 â†’ Console)
para diagnosticar problemas con Firestore.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PRUEBA 1: VERIFICAR CONEXIÃ“N A FIREBASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Pega este cÃ³digo en la consola:
console.log('Firebase App:', firebase.app().name);
console.log('Firebase Config:', firebase.app().options);

RESULTADO ESPERADO:
Firebase App: [DEFAULT]
Firebase Config: {apiKey: "...", authDomain: "...", ...}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PRUEBA 2: VERIFICAR USUARIO AUTENTICADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Pega este cÃ³digo en la consola:
firebase.auth().onAuthStateChanged((user) => {
  if (user) {
    console.log('âœ… Usuario autenticado:');
    console.log('  UID:', user.uid);
    console.log('  Email:', user.email);
    console.log('  Email verificado:', user.emailVerified);
  } else {
    console.log('âŒ No hay usuario autenticado');
  }
});

RESULTADO ESPERADO (si ya iniciaste sesiÃ³n):
âœ… Usuario autenticado:
  UID: [algÃºn ID aleatorio]
  Email: [tu correo]
  Email verificado: false

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PRUEBA 3: PROBAR LECTURA DE FIRESTORE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Pega este cÃ³digo en la consola:
firebase.firestore().collection('alumnos').get()
  .then(snapshot => {
    console.log('âœ… Lectura exitosa');
    console.log('Total de documentos en "alumnos":', snapshot.size);
    snapshot.forEach(doc => {
      console.log('Documento:', doc.id, 'â†’', doc.data());
    });
  })
  .catch(error => {
    console.error('âŒ Error al leer:', error.code, error.message);
  });

RESULTADO ESPERADO (si todo estÃ¡ bien):
âœ… Lectura exitosa
Total de documentos en "alumnos": 1 (o mÃ¡s)
Documento: [UID] â†’ {codigo: "...", nombre: "...", ...}

RESULTADO DE ERROR (si las reglas estÃ¡n mal):
âŒ Error al leer: permission-denied Missing or insufficient permissions

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PRUEBA 4: PROBAR ESCRITURA EN FIRESTORE (MANUAL)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Pega este cÃ³digo en la consola (despuÃ©s de iniciar sesiÃ³n):
const user = firebase.auth().currentUser;
if (user) {
  firebase.firestore().collection('alumnos').doc(user.uid).set({
    codigo: 'TEST123',
    nombre: 'Usuario de Prueba',
    email: user.email,
    rol: 'alumno',
    fechaRegistro: new Date().toISOString(),
    timestamp: Date.now()
  })
  .then(() => {
    console.log('âœ… Escritura exitosa en Firestore');
  })
  .catch(error => {
    console.error('âŒ Error al escribir:', error.code, error.message);
  });
} else {
  console.error('âŒ No hay usuario autenticado');
}

RESULTADO ESPERADO:
âœ… Escritura exitosa en Firestore

RESULTADO DE ERROR:
âŒ Error al escribir: permission-denied ...
   â†’ Necesitas configurar las reglas de Firestore

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PRUEBA 5: PROBAR LECTURA DE SOLICITUDES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// Pega este cÃ³digo en la consola:
firebase.firestore().collection('solicitudes').get()
  .then(snapshot => {
    console.log('âœ… Lectura exitosa de solicitudes');
    console.log('Total de solicitudes:', snapshot.size);
    snapshot.forEach(doc => {
      const data = doc.data();
      console.log('Solicitud:', doc.id);
      console.log('  Estado:', data.estado);
      console.log('  Servidor:', data.servidor);
      console.log('  Fecha:', data.fecha);
    });
  })
  .catch(error => {
    console.error('âŒ Error:', error.code, error.message);
  });

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PRUEBA 6: VERIFICAR ESTRUCTURA DE DATOS AL REGISTRAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DespuÃ©s de intentar registrar un usuario, busca en la consola:

âœ… Busca estos mensajes:
   ğŸ“ Iniciando registro de usuario...
   CÃ³digo: [tu cÃ³digo]
   Nombre: [tu nombre]
   Email: [tu email]
   Paso 1: Creando usuario en Firebase Auth...
   âœ… Usuario creado en Auth. UID: [UID]
   Paso 2: Guardando datos en Firestore...
   Datos a guardar: {codigo: "...", nombre: "...", ...}
   âœ… Datos guardados en Firestore exitosamente

âŒ Si ves este error:
   Error detallado: FirebaseError: Missing or insufficient permissions
   â†’ Las reglas de Firestore NO permiten la escritura
   â†’ Sigue las instrucciones en SOLUCION_REGISTRO.txt

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
INTERPRETACIÃ“N DE ERRORES COMUNES:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ERROR: "permission-denied"
CAUSA: Las reglas de Firestore bloquean la operaciÃ³n
SOLUCIÃ“N: Configura las reglas en Firebase Console

ERROR: "unauthenticated"
CAUSA: No hay usuario autenticado
SOLUCIÃ“N: Inicia sesiÃ³n primero

ERROR: "not-found"
CAUSA: La colecciÃ³n o documento no existe
SOLUCIÃ“N: Normal si es la primera vez, se crearÃ¡ automÃ¡ticamente

ERROR: "network-request-failed"
CAUSA: No hay conexiÃ³n a Internet
SOLUCIÃ“N: Verifica tu conexiÃ³n

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CÃ“MO USAR ESTOS SCRIPTS:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Abre tu aplicaciÃ³n web en el navegador
2. Presiona F12 para abrir Developer Tools
3. Ve a la pestaÃ±a "Console"
4. Copia y pega cada script uno por uno
5. Presiona Enter para ejecutar
6. Lee los resultados

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
